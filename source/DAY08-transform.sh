#!/bin/sh

cat source/DAY08-$1input.txt | \
    sed '
        s/ | /|/g
        s/ /000/g
        s/|/000/g
        s/$/000/g
        s/a/001/g
        s/b/010/g
        s/c/011/g
        s/d/100/g
        s/e/101/g
        s/f/110/g
        s/g/111/g
    ' \
    | tr -d '\n' \
    | sed -E '
        s/(........)/\1b, /g

        s/, (.......)$/, \10b/
        s/, (......)$/, \100b/
        s/, (.....)$/, \1000b/
        s/, (....)$/, \10000b/
        s/, (...)$/, \100000b/
        s/, (..)$/, \1000000b/
        s/, (.)$/, \10000000b/

        s/, $//
        s/$/\n/
        s/^/.db /
    ' > source/DAY08-$1input.z80
